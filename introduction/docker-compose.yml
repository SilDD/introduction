
services:
  web:
    build:
      context: .
    container_name: introduction_web
    command: gunicorn introduction.wsgi:application --bind 0.0.0.0:8000
    volumes:
      - .:/usr/src/app  # Angepasster Pfad für den Anwendungscode
      - static_volume:/usr/apps/introduction/introduction/introduction/introduction/static  # Wagtail-Static-Dateien
      - media_volume:/usr/apps/introduction/introduction/introduction/media  # Wagtail-Media-Dateien
    ports:
      - "3000:3000"
    environment:
      DJANGO_SETTINGS_MODULE: "introduction.settings"
      ALLOWED_HOSTS: "johannesklaus.me,localhost,127.0.0.1"
      DEBUG: "1"  # Setzt Debug-Modus auf "1" während der Entwicklung
      DATABASE_URL: "sqlite:///db.sqlite3"  # Verwendet SQLite als Datenbank
    depends_on:
      - db

  db:
    image: busybox
    container_name: sqlite_db
    volumes:
      - ./db.sqlite3:/app/db.sqlite3  # SQLite-Datenbank
    command: tail -f /dev/null  # Hält den Container am Laufen

  nginx:
    image: nginx:latest
    container_name: nginx
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf  # Eigene Nginx-Konfiguration
    depends_on:
      - web

